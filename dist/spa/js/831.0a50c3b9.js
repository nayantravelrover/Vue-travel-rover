"use strict";(globalThis["webpackChunktravel_rover_vue_frontend"]=globalThis["webpackChunktravel_rover_vue_frontend"]||[]).push([[831],{9831:(e,t,a)=>{a.r(t),a.d(t,{default:()=>xe});var i=a(9835),o=a(1957),r=a(6686),s=a.n(r);const n=e=>((0,i.dD)("data-v-27c373ab"),e=e(),(0,i.Cn)(),e),l={key:0,class:"modal-overlay"},d={key:0,class:"modal",role:"dialog"},c=n((()=>(0,i._)("div",{class:"loader-wrapper"},[(0,i._)("div",{class:"loader"},[(0,i._)("div"),(0,i._)("div"),(0,i._)("div"),(0,i._)("div")]),(0,i._)("p",null,"Please wait, AI will generate your itinerary in 2 minutes.")],-1))),p=[c],_=n((()=>(0,i._)("img",{src:s(),style:{"max-width":"200px"}},null,-1))),m={key:1,class:"q-pa-xs"},g={class:"q-pa-xs"},u={class:"row"},y={class:"col q-pa-md"},h=n((()=>(0,i._)("div",{class:"text-bold row sectionheading"},"Place Name",-1))),v={id:"place_description",class:"q-pt-lg"},w=n((()=>(0,i._)("div",{class:"text-bold row sectionheading"},"Place Description",-1))),f={class:"q-pt-sm"},k={id:"itinerary_name",class:"q-pt-lg"},$=n((()=>(0,i._)("div",{class:"text-bold sectionheading row"},"Itinerary Name",-1))),b={class:"q-pt-lg"},q={class:"row"},W={class:"col-6"},I=n((()=>(0,i._)("div",{class:"text-bold row sectionheading"},"Start Dates",-1))),x={class:"col-6"},S=n((()=>(0,i._)("div",{class:"text-bold row sectionheading"},"Number of Days",-1))),P=n((()=>(0,i._)("div",{class:"q-pt-lg"},[(0,i._)("div",{class:"sectionheading",style:{"font-size":"large"}},"Itinerary")],-1))),D={class:"q-pt-lg"},V=n((()=>(0,i._)("br",null,null,-1))),Z={class:"col-6 q-pa-md",style:{"background-color":"#4B5563"}},U={style:{"background-color":"transparent"}};function A(e,t,a,r,s,n){const c=(0,i.up)("q-btn"),A=(0,i.up)("q-toolbar-title"),T=(0,i.up)("LoginPage2"),Q=(0,i.up)("RegisterPage"),C=(0,i.up)("q-list"),O=(0,i.up)("q-menu"),N=(0,i.up)("q-toolbar"),J=(0,i.up)("q-select"),R=(0,i.up)("q-input"),z=(0,i.up)("q-uploader"),j=(0,i.up)("PicturedWYISG"),L=(0,i.up)("Datepicker"),E=(0,i.up)("DayEditor"),F=(0,i.up)("OnlyPicture"),G=(0,i.up)("q-scroll-area"),M=(0,i.up)("ItineraryPreview");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(o.uT,{name:"fade",appear:""},{default:(0,i.w5)((()=>[s.showModal?((0,i.wg)(),(0,i.iD)("div",l)):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(o.uT,{name:"pop",appear:""},{default:(0,i.w5)((()=>[s.showModal?((0,i.wg)(),(0,i.iD)("div",d,p)):(0,i.kq)("",!0)])),_:1}),(0,i._)("div",null,[(0,i.Wm)(N,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{color:"primary",label:"Back",onClick:n.go_to_create_itinerary},null,8,["onClick"]),(0,i.Wm)(A,{class:"q-pa-md row item-center"},{default:(0,i.w5)((()=>[_])),_:1}),(0,i.Wm)(c,{flat:"",dense:"",round:"",class:"q-ml-md",icon:e.matAccountCircle,"aria-label":"Menu",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,{style:{"min-width":"100px","max-height":"89px"}},{default:(0,i.w5)((()=>[!1===this.$store.state.user_logged_in?((0,i.wg)(),(0,i.j4)(T,{key:0})):(0,i.kq)("",!0),!1===this.$store.state.user_logged_in?((0,i.wg)(),(0,i.iD)("div",m,[(0,i.Wm)(Q)])):(0,i.kq)("",!0),(0,i._)("div",g,[this.$store.state.user_logged_in?((0,i.wg)(),(0,i.j4)(c,{key:0,label:"Logout",color:"primary",style:{width:"100%"},onClick:e.logout},null,8,["onClick"])):(0,i.kq)("",!0)])])),_:1})])),_:1})])),_:1},8,["icon"])])),_:1})]),(0,i._)("div",u,[(0,i.Wm)(G,{class:"col-6 q-pa-md",style:{height:"100vh"}},{default:(0,i.w5)((()=>[(0,i._)("div",y,[h,(0,i.Wm)(J,{outlined:"",modelValue:n.place_name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.place_name=e),options:["Himachal Pradesh","Leh Ladakh","Goa","Kashmir","Uttarakhand"]},null,8,["modelValue"]),(0,i._)("div",v,[w,(0,i.Wm)(R,{class:"row",outlined:"",modelValue:n.place_description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.place_description=e)},null,8,["modelValue"]),(0,i._)("div",f,[(0,i.Wm)(z,{flat:"",bordered:"",color:"white","text-color":"black",url:"https://admin.travelrover.in/travel-rover/api-files/",style:{},"auto-upload":"",label:"Add image if any","field-name":"file","max-files":"1",onUploaded:n.place_file_uploaded},null,8,["onUploaded"])])]),(0,i._)("div",k,[$,(0,i.Wm)(R,{class:"row",outlined:"",modelValue:n.itinerary_name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.itinerary_name=e)},null,8,["modelValue"])]),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"tour_highlights",heading:"Tour Highlights"}),(0,i._)("div",b,[(0,i._)("div",q,[(0,i._)("div",W,[I,(0,i.Wm)(L,{class:"q-pr-md",modelValue:n.start_dates,"onUpdate:modelValue":t[3]||(t[3]=e=>n.start_dates=e),enableTimePicker:!1,multiDates:""},null,8,["modelValue"])]),(0,i._)("div",x,[S,(0,i.Wm)(R,{dense:"",class:"row",modelValue:n.number_of_days,"onUpdate:modelValue":t[4]||(t[4]=e=>n.number_of_days=e),outlined:""},null,8,["modelValue"])])])]),P,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.days,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"",key:t},[(0,i._)("div",D,[(0,i.Wm)(E,{day_index:t,day_content:e.description,day_images:e.images},null,8,["day_index","day_content","day_images"])])])))),128)),(0,i.Wm)(c,{class:"row",onClick:t[5]||(t[5]=e=>n.days_add())},{default:(0,i.w5)((()=>[(0,i.Uk)("Add day")])),_:1}),V,(0,i.Wm)(j,{image:!1,class:"q-pt-lg",property_key:"places_to_visit",heading:"Places to Visit"}),(0,i.Wm)(F,{image:!0,class:"q-pt-lg",property_key:"places_to_visit_1",heading:"Places to Visit Image One"}),(0,i.Wm)(F,{image:!0,class:"q-pt-lg",property_key:"places_to_visit_2",heading:"Places to Visit Image Two"}),(0,i.Wm)(F,{image:!0,class:"q-pt-lg",property_key:"places_to_visit_3",heading:"Places to Visit Image Three"}),(0,i.Wm)(F,{image:!0,class:"q-pt-lg",property_key:"places_to_visit_4",heading:"Places to Visit Image Four"}),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"accomodation_arrangements",heading:"Accomodation Arrangements"}),(0,i.Wm)(F,{image:!0,class:"q-pt-lg",property_key:"accomodation_arrangements_1",heading:"Accomodations Arrangements Image One"}),(0,i.Wm)(F,{image:!0,class:"q-pt-lg",property_key:"accomodation_arrangements_2",heading:"Accomodations Arrangements Image Two"}),(0,i.Wm)(F,{image:!0,class:"q-pt-lg",property_key:"accomodation_arrangements_3",heading:"Accomodations Arrangements Image Three"}),(0,i.Wm)(F,{image:!0,class:"q-pt-lg",property_key:"accomodation_arrangements_4",heading:"Accomodations Arrangements Image Four"}),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"travel_arrangements",heading:"Travel Arrangements"}),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"inclusions",heading:"Inclusions"}),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"exclusions",heading:"Exclusions"}),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"terms_and_conditions",heading:"Terms and Conditions"}),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"cancellations_policy",heading:"Cancellations Policy"}),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"things_to_carry",heading:"Things to Carry"}),(0,i.Wm)(j,{class:"q-pt-lg",property_key:"tour_rates",heading:"Tour Rates"})]),(0,i.Wm)(c,{color:"green",label:"Save",onClick:t[6]||(t[6]=e=>n.save_itinerary())})])),_:1}),(0,i._)("div",Z,[(0,i._)("div",U,[(0,i.Wm)(c,{flat:"","text-color":"white",icon:"link",label:"Create Shareable Link",onClick:t[7]||(t[7]=e=>n.generateReport())})]),(0,i.Wm)(G,{style:{height:"92vh"}},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{class:"q-ma-lg",id:"preview"})])),_:1})])])],64)}a(2309),a(9665);var T=a(6970);const Q={class:"text-bold sectionheading",style:{"font-size":"large"}};function C(e,t,a,o,r,s){const n=(0,i.up)("q-editor"),l=(0,i.up)("q-uploader");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Q,"Day "+(0,T.zw)(a.day_index+1),1),(0,i.Wm)(n,{modelValue:s.day_content_store,"onUpdate:modelValue":t[0]||(t[0]=e=>s.day_content_store=e),toolbar:[["bold","italic"],["ordered"],["link"]]},null,8,["modelValue"]),(0,i.Wm)(l,{flat:"",bordered:"",color:"white","text-color":"black",url:"https://admin.travelrover.in/travel-rover/api-files/",style:{},"auto-upload":"",label:"Add image if any","field-name":"file",onUploaded:s.day_img_update,"max-files":"1",onRejected:s.onRejected},null,8,["onUploaded","onRejected"])])}const O=e=>fetch(e).then((e=>e.blob())).then((e=>new Promise(((t,a)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=a,i.readAsDataURL(e)})))),N={name:"day-editor",props:["day_index","day_content","day_images","day_obj"],setup(){return{details:""}},model:{prop:"day_content",event:"day_content_change"},methods:{day_img_update:function(e){var t=JSON.parse(e.xhr.response).file;t="https://admin.travelrover.in"+t;var a=this.day_index;O(t).then((e=>{console.log("RESULT:",e)}));var i={index_day:a,value:t};console.log(i),this.$store.commit("day_img_update",i),console.log(this.$store)},onRejected:function(e){$q.notify({type:"negative",message:`${e.length} file(s) did not pass validation constraints`})}},computed:{day_content_store:{get:function(){return this.$store.state.itinerary_preview.days[this.day_index].description},set:function(e){var t=this.day_index,a={index_day:t,value:e};this.$store.commit("day_content_update",a)}}}};var J=a(1639),R=a(3478),z=a(4343),j=a(9984),L=a.n(j);const E=(0,J.Z)(N,[["render",C],["__scopeId","data-v-beecc8a0"]]),F=E;L()(N,"components",{QEditor:R.Z,QUploader:z.Z});var G=a(8616);const M={class:""},B={class:"q-ma-sm sectionheading"};function K(e,t,a,o,r,s){const n=(0,i.up)("q-editor"),l=(0,i.up)("q-uploader");return(0,i.wg)(),(0,i.iD)("div",M,[(0,i._)("div",B,(0,T.zw)(a.heading),1),(0,i.Wm)(n,{class:"",modelValue:s.property_content_store,"onUpdate:modelValue":t[0]||(t[0]=e=>s.property_content_store=e),"min-height":"5rem",toolbar:[["bold","italic"],["ordered"],["link"]]},null,8,["modelValue"]),this.image?((0,i.wg)(),(0,i.j4)(l,{key:0,style:{},color:"white","text-color":"black",bordered:"",flat:"",url:"https://admin.travelrover.in/travel-rover/api-files/","auto-upload":"",label:"Add image if any","field-name":"file","max-files":"1",onUploaded:s.property_img_update},null,8,["onUploaded"])):(0,i.kq)("",!0)])}const Y={name:"PicturedWYISG",props:["heading","property_key","image"],methods:{property_img_update:function(e){var t=JSON.parse(e.xhr.response).file;t="https://admin.travelrover.in"+t,console.log("here"),this.$store.commit(this.property_key+"_img_update",t),console.log(this.$store.state.itinerary_preview.places_to_visit_img)}},computed:{property_content_store:{get:function(){return this.$store.state.itinerary_preview[this.property_key]},set:function(e){var t=this.property_key+"_update";this.$store.commit(t,e),console.log(this.$store.state)}}},setup(){return{editor:""}}},H=(0,J.Z)(Y,[["render",K],["__scopeId","data-v-58fdefd3"]]),X=H;L()(Y,"components",{QEditor:R.Z,QUploader:z.Z});const ee={class:""},te={class:"q-ma-sm sectionheading"};function ae(e,t,a,o,r,s){const n=(0,i.up)("q-uploader");return(0,i.wg)(),(0,i.iD)("div",ee,[(0,i._)("div",te,(0,T.zw)(a.heading),1),this.image?((0,i.wg)(),(0,i.j4)(n,{key:0,style:{},color:"white","text-color":"black",bordered:"",flat:"",url:"https://admin.travelrover.in/travel-rover/api-files/","auto-upload":"",label:"Add image if any","field-name":"file","max-files":"1",onUploaded:s.property_img_update},null,8,["onUploaded"])):(0,i.kq)("",!0)])}const ie={name:"OnlyPicture",props:["heading","property_key","image"],methods:{property_img_update:function(e){var t=JSON.parse(e.xhr.response).file;t="https://admin.travelrover.in"+t,console.log("here"),this.$store.commit(this.property_key+"_img_update",t),console.log(this.$store.state.itinerary_preview.places_to_visit_img)}},computed:{property_content_store:{get:function(){return this.$store.state.itinerary_preview[this.property_key]},set:function(e){var t=this.property_key+"_update";this.$store.commit(t,e),console.log(this.$store.state)}}},setup(){return{editor:""}}},oe=(0,J.Z)(ie,[["render",ae],["__scopeId","data-v-0e1d97a8"]]),re=oe;L()(ie,"components",{QUploader:z.Z});var se=a(290),ne=a(8486),le=a(7449),de=(a(6827),a(6060));let ce;const pe={name:"Itinary-Builder",components:{PicturedWYISG:X,ItineraryPreview:G["default"],DayEditor:F,Datepicker:se.Z,OnlyPicture:re},mounted(){window.location.href;var e=window.location.href.split("?")[1],t=new URLSearchParams(e);console.log(t);var a=t.get("pk"),i=t.get("pk_of_prompt");console.log(a),console.log(i),null==i?(this.view_itinerary(a),this.showModal=!1):(this.showModal=!0,(0,le.zy)().then((e=>{var t=window.localStorage.getItem("travel_rover_access");(0,le.zW)({pk_of_prompt:i},t).then((e=>{if(console.log(e["data"]),200==e["data"]["status"]){console.log(e["data"]["pk_of_itinerary"]);var t=e["data"]["pk_of_itinerary"];window.open("/#/itinarybuilder/?pk="+t),window.location.href="/#/itinarybuilder/?pk="+t,window.location.reload()}else ce.notify({type:"negative",message:"There is some internal issues going on.",position:"top"})})).catch((e=>{console.log(e),(0,le.G_)().then((e=>{var t=e["data"]["access"];window.localStorage.setItem("travel_rover_access",t),(0,le.zW)({pk_of_prompt:i},t).then((e=>{if(this.$store.commit("user_logged_in_update",!0),200==e["data"]["status"]){console.log(e["data"]["pk_of_itinerary"]);var t=e["data"]["pk_of_itinerary"];window.location.href="/#/itinarybuilder/?pk="+t,window.location.reload()}else ce.notify({type:"negative",message:"There is some internal issues going on.",position:"top"})})).catch((e=>{ce.notify({type:"negative",message:"Kindly log-in/sign-up to enable this functionality",position:"top"}),this.$store.commit("user_logged_in_update",!1),console.log(e)}))}))}))})))},methods:{view_itinerary(e){var t={itinerary_pk:e};(0,le.zy)().then((a=>{var i=window.localStorage.getItem("travel_rover_access");this.card=!0;-1!=e&&(0,le.sJ)(t,i).then((e=>{console.log(JSON.parse(e["data"]["data"])[0]["fields"]),this.$store.commit("itinerary_preview_update",JSON.parse(e["data"]["data"])[0]["fields"]);var t=JSON.parse(e["data"]["data"])[0]["fields"]["start_dates"];t=JSON.parse(t),console.log(t),this.$store.commit("start_dates_update",t)})),this.$store.commit("user_logged_in_update",!0)})).catch((a=>{console.log(a),(0,le.G_)().then((a=>{var i=a["data"]["access"];window.localStorage.setItem("travel_rover_access",i),-1!=e&&(0,le.sJ)(t,i).then((e=>{console.log(JSON.parse(e["data"]["data"])[0]["fields"]),this.$store.commit("itinerary_preview_update",JSON.parse(e["data"]["data"])[0]["fields"]);var t=JSON.parse(e["data"]["data"])[0]["fields"]["start_dates"];t=JSON.parse(t),console.log(t),this.$store.commit("start_dates_update",t)})),this.$store.commit("user_logged_in_update",!0)})).catch((e=>{ce.notify({type:"negative",message:"Kindly log-in/sign-up to enable this functionality",position:"top"}),this.$store.commit("user_logged_in_update",!1),console.log(e)}))}))},place_file_uploaded:function(e){var t=JSON.parse(e.xhr.response).file;t="https://admin.travelrover.in"+t,this.$store.commit("place_img_update",t)},days_add:function(){console.log("add days called"),this.$store.commit("day_add",1),console.log(this.$store.state.itinerary_preview.days)},generateReport(){async function e(e){const t=await O(e.state.itinerary_preview.place_img);e.commit("place_img_update",t)}async function t(e){for(let t=0;t<e.state.itinerary_preview.places_to_visit_img[0].images.length;t++)if(""!=e.state.itinerary_preview.places_to_visit_img[0].images[t]){const a=await O(e.state.itinerary_preview.places_to_visit_img[0].images[t]);e.commit("places_to_visit_"+(t+1)+"_img_update",a),console.log(a)}}async function a(e){for(let t=0;t<e.state.itinerary_preview.accomodation_arrangements_img[0].images.length;t++)if(""!=e.state.itinerary_preview.accomodation_arrangements_img[0].images[t]){const a=await O(e.state.itinerary_preview.accomodation_arrangements_img[0].images[t]);e.commit("accomodation_arrangements_"+(t+1)+"_img_update",a)}}async function i(e){alert("PDF will be downloaded within "+2*e.state.itinerary_preview.days.length+" seconds");for(let t=0;t<e.state.itinerary_preview.days.length;t++){const a=await O(e.state.itinerary_preview.days[t].images),i={index_day:t,value:a};e.commit("day_img_update",i),console.log(e),t==e.state.itinerary_preview.days.length-1&&setTimeout((()=>{(0,ne.Z)(document.getElementById("preview"),{pagebreak:{mode:"avoid-all",before:"#page2el"},filename:e.state.itinerary_preview.place_name})}),"1000")}}e(this.$store).then((e=>{console.log("done")})),a(this.$store).then((e=>{console.log("done")})),t(this.$store).then((e=>{console.log("done")})),i(this.$store).then((e=>{console.log("done")}))},save_itinerary:function(){console.log(this.$store.state.itinerary_preview),(0,le.zy)().then((e=>{var t=window.localStorage.getItem("travel_rover_access");(0,le.Ig)({itinerary:this.$store.state.itinerary_preview,itinerary_pk:window.location.href.split("?pk=")[1]},t),this.$store.commit("user_logged_in_update",!0)})).catch((e=>{console.log(e),(0,le.G_)().then((e=>{var t=e["data"]["access"];window.localStorage.setItem("travel_rover_access",t),(0,le.Ig)({itinerary:this.$store.state.itinerary_preview,itinerary_pk:window.location.href.split("?pk=")[1]},t),this.$store.commit("user_logged_in_update",!0)})).catch((e=>{ce.notify({type:"negative",message:"Kindly log-in/sign-up to enable this functionality",position:"top"}),this.$store.commit("user_logged_in_update",!1),console.log(e)}))}))},go_to_create_itinerary(){this.$router.push({path:"/itinerarybuilder",name:"ItineraryBuilder",query:{pk:-1}})},addScript(e){var t=document.createElement("script");t.type="application/javascript",t.src=e,document.head.appendChild(t)},onSelectFile(){const e=this.$refs.fileInput,t=e.files;if(this.FileImage=t[0],t&&t[0]){const e=new FileReader;e.onload=e=>{this.imageData=e.target.result},e.readAsDataURL(t[0]),this.$emit("input",t[0])}console.log(this.imageData)},choosepicture(){this.$refs.fileInput.click()}},data(){return{imageData:null,date:[],showModal:!1}},computed:{place_name:{set(e){this.$store.commit("place_name_update",e)},get(){return this.$store.state.itinerary_preview.place_name}},place_description:{set(e){this.$store.commit("place_description_update",e)},get(){return this.$store.state.itinerary_preview.place_description}},tour_highlights:{set(e){this.$store.commit("tour_highlights_update",e)},get(){return this.$store.state.itinerary_preview.tour_highlights}},place_img:{set(e){this.$store.commit("place_img_update",e)},get(){return this.$store.state.itinerary_preview.place_img}},itinerary_name:{set(e){this.$store.commit("itinerary_name_update",e)},get(){return this.$store.state.itinerary_preview.itinerary_name}},start_dates:{set(e){var t=[];e.map((e=>{t.push(e.toISOString().slice(0,10))})),this.$store.commit("start_dates_update",t),console.log(this.$store.state.itinerary_preview.start_dates)},get(){return this.$store.state.itinerary_preview.start_dates}},number_of_days:{set(e){this.$store.commit("number_of_days_update",e)},get(){return this.$store.state.itinerary_preview.number_of_days}},itinerary_update:{set(e){this.$store.commit("itinerary_update",e)},get(){return this.$store.state.itinerary_preview}},days:{set(e){this.$store.commit("day_update",e)},get(){return this.$store.state.itinerary_preview.days}}},created(){console.log(this.days),this.matAccountCircle=de.Az6}};var _e=a(1663),me=a(8879),ge=a(1973),ue=a(6362),ye=a(3246),he=a(490),ve=a(1233),we=a(6663),fe=a(7887),ke=a(6611),$e=a(2857),be=a(2765),qe=a(4939),We=a(2146);const Ie=(0,J.Z)(pe,[["render",A],["__scopeId","data-v-27c373ab"]]),xe=Ie;L()(pe,"components",{QToolbar:_e.Z,QBtn:me.Z,QToolbarTitle:ge.Z,QMenu:ue.Z,QList:ye.Z,QItem:he.Z,QItemSection:ve.Z,QScrollArea:we.Z,QSelect:fe.Z,QInput:ke.Z,QUploader:z.Z,QIcon:$e.Z,QPopupProxy:be.Z,QDate:qe.Z}),L()(pe,"directives",{ClosePopup:We.Z})}}]);