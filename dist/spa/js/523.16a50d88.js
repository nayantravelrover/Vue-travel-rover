"use strict";(globalThis["webpackChunktravel_rover_vue_frontend"]=globalThis["webpackChunktravel_rover_vue_frontend"]||[]).push([[523],{6523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>be});var i=a(9835),o=a(6686),r=a.n(o);const s=e=>((0,i.dD)("data-v-3ab0326f"),e=e(),(0,i.Cn)(),e),n=s((()=>(0,i._)("img",{src:r(),style:{"max-width":"200px"}},null,-1))),l={key:1,class:"q-pa-xs"},d={class:"q-pa-xs"},c={class:"row"},p={class:"col q-pa-md"},_=s((()=>(0,i._)("div",{class:"text-bold row sectionheading"},"Place Name",-1))),m={id:"place_description",class:"q-pt-lg"},g=s((()=>(0,i._)("div",{class:"text-bold row sectionheading"},"Place Description",-1))),u={class:"q-pt-sm"},y={id:"itinerary_name",class:"q-pt-lg"},h=s((()=>(0,i._)("div",{class:"text-bold sectionheading row"},"Itinerary Name",-1))),v={class:"q-pt-lg"},w={class:"row"},f={class:"col-6"},k=s((()=>(0,i._)("div",{class:"text-bold row sectionheading"},"Start Dates",-1))),$={class:"col-6"},b=s((()=>(0,i._)("div",{class:"text-bold row sectionheading"},"Number of Days",-1))),q=s((()=>(0,i._)("div",{class:"q-pt-lg"},[(0,i._)("div",{class:"sectionheading",style:{"font-size":"large"}},"Itinerary")],-1))),W={class:"q-pt-lg"},x=(0,i.Uk)("Add day"),I=s((()=>(0,i._)("br",null,null,-1))),S={class:"col-6 q-pa-md",style:{"background-color":"#4B5563"}},V={style:{"background-color":"transparent"}};function Z(e,t,a,o,r,s){const Z=(0,i.up)("q-btn"),D=(0,i.up)("q-toolbar-title"),P=(0,i.up)("LoginPage2"),U=(0,i.up)("RegisterPage"),A=(0,i.up)("q-list"),Q=(0,i.up)("q-menu"),O=(0,i.up)("q-toolbar"),C=(0,i.up)("q-select"),T=(0,i.up)("q-input"),N=(0,i.up)("q-uploader"),J=(0,i.up)("PicturedWYISG"),R=(0,i.up)("Datepicker"),j=(0,i.up)("DayEditor"),z=(0,i.up)("OnlyPicture"),E=(0,i.up)("q-scroll-area"),L=(0,i.up)("ItineraryPreview");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",null,[(0,i.Wm)(O,null,{default:(0,i.w5)((()=>[(0,i.Wm)(Z,{color:"primary",label:"Back",onClick:s.go_to_create_itinerary},null,8,["onClick"]),(0,i.Wm)(D,{class:"q-pa-md row item-center"},{default:(0,i.w5)((()=>[n])),_:1}),(0,i.Wm)(Z,{flat:"",dense:"",round:"",class:"q-ml-md",icon:e.matAccountCircle,"aria-label":"Menu",color:"primary"},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,null,{default:(0,i.w5)((()=>[(0,i.Wm)(A,{style:{"min-width":"100px","max-height":"89px"}},{default:(0,i.w5)((()=>[!1===this.$store.state.user_logged_in?((0,i.wg)(),(0,i.j4)(P,{key:0})):(0,i.kq)("",!0),!1===this.$store.state.user_logged_in?((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(U)])):(0,i.kq)("",!0),(0,i._)("div",d,[this.$store.state.user_logged_in?((0,i.wg)(),(0,i.j4)(Z,{key:0,label:"Logout",color:"primary",style:{width:"100%"},onClick:e.logout},null,8,["onClick"])):(0,i.kq)("",!0)])])),_:1})])),_:1})])),_:1},8,["icon"])])),_:1})]),(0,i._)("div",c,[(0,i.Wm)(E,{class:"col-6 q-pa-md",style:{height:"100vh"}},{default:(0,i.w5)((()=>[(0,i._)("div",p,[_,(0,i.Wm)(C,{outlined:"",modelValue:s.place_name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.place_name=e),options:["Himachal Pradesh","Leh Ladakh","Goa","Kashmir","Uttarakhand"]},null,8,["modelValue"]),(0,i._)("div",m,[g,(0,i.Wm)(T,{class:"row",outlined:"",modelValue:s.place_description,"onUpdate:modelValue":t[1]||(t[1]=e=>s.place_description=e)},null,8,["modelValue"]),(0,i._)("div",u,[(0,i.Wm)(N,{flat:"",bordered:"",color:"white","text-color":"black",url:"https://admin.travelrover.in/travel-rover/api-files/",style:{},"auto-upload":"",label:"Add image if any","field-name":"file","max-files":"1",onUploaded:s.place_file_uploaded},null,8,["onUploaded"])])]),(0,i._)("div",y,[h,(0,i.Wm)(T,{class:"row",outlined:"",modelValue:s.itinerary_name,"onUpdate:modelValue":t[2]||(t[2]=e=>s.itinerary_name=e)},null,8,["modelValue"])]),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"tour_highlights",heading:"Tour Highlights"}),(0,i._)("div",v,[(0,i._)("div",w,[(0,i._)("div",f,[k,(0,i.Wm)(R,{class:"q-pr-md",modelValue:s.start_dates,"onUpdate:modelValue":t[3]||(t[3]=e=>s.start_dates=e),enableTimePicker:!1,multiDates:""},null,8,["modelValue"])]),(0,i._)("div",$,[b,(0,i.Wm)(T,{dense:"",class:"row",modelValue:s.number_of_days,"onUpdate:modelValue":t[4]||(t[4]=e=>s.number_of_days=e),outlined:""},null,8,["modelValue"])])])]),q,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.days,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"",key:t},[(0,i._)("div",W,[(0,i.Wm)(j,{day_index:t,day_content:e.description,day_images:e.images},null,8,["day_index","day_content","day_images"])])])))),128)),(0,i.Wm)(Z,{class:"row",onClick:t[5]||(t[5]=e=>s.days_add())},{default:(0,i.w5)((()=>[x])),_:1}),I,(0,i.Wm)(J,{image:!1,class:"q-pt-lg",property_key:"places_to_visit",heading:"Places to Visit"}),(0,i.Wm)(z,{image:!0,class:"q-pt-lg",property_key:"places_to_visit_1",heading:"Places to Visit Image One"}),(0,i.Wm)(z,{image:!0,class:"q-pt-lg",property_key:"places_to_visit_2",heading:"Places to Visit Image Two"}),(0,i.Wm)(z,{image:!0,class:"q-pt-lg",property_key:"places_to_visit_3",heading:"Places to Visit Image Three"}),(0,i.Wm)(z,{image:!0,class:"q-pt-lg",property_key:"places_to_visit_4",heading:"Places to Visit Image Four"}),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"accomodation_arrangements",heading:"Accomodation Arrangements"}),(0,i.Wm)(z,{image:!0,class:"q-pt-lg",property_key:"accomodation_arrangements_1",heading:"Accomodations Arrangements Image One"}),(0,i.Wm)(z,{image:!0,class:"q-pt-lg",property_key:"accomodation_arrangements_2",heading:"Accomodations Arrangements Image Two"}),(0,i.Wm)(z,{image:!0,class:"q-pt-lg",property_key:"accomodation_arrangements_3",heading:"Accomodations Arrangements Image Three"}),(0,i.Wm)(z,{image:!0,class:"q-pt-lg",property_key:"accomodation_arrangements_4",heading:"Accomodations Arrangements Image Four"}),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"travel_arrangements",heading:"Travel Arrangements"}),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"inclusions",heading:"Inclusions"}),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"exclusions",heading:"Exclusions"}),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"terms_and_conditions",heading:"Terms and Conditions"}),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"cancellations_policy",heading:"Cancellations Policy"}),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"things_to_carry",heading:"Things to Carry"}),(0,i.Wm)(J,{class:"q-pt-lg",property_key:"tour_rates",heading:"Tour Rates"})])])),_:1}),(0,i._)("div",S,[(0,i._)("div",V,[(0,i.Wm)(Z,{flat:"","text-color":"white",icon:"download",label:"Download",onClick:t[6]||(t[6]=e=>s.generateReport())}),(0,i.Wm)(Z,{flat:"","text-color":"white",icon:"save",label:"Save",class:"",onClick:t[7]||(t[7]=e=>s.save_itinerary())})]),(0,i.Wm)(E,{style:{height:"92vh"}},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{class:"q-ma-lg",id:"preview"})])),_:1})])])],64)}a(9665);var D=a(6970);const P={class:"text-bold sectionheading",style:{"font-size":"large"}};function U(e,t,a,o,r,s){const n=(0,i.up)("q-editor"),l=(0,i.up)("q-uploader");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",P,"Day "+(0,D.zw)(a.day_index+1),1),(0,i.Wm)(n,{modelValue:s.day_content_store,"onUpdate:modelValue":t[0]||(t[0]=e=>s.day_content_store=e),toolbar:[["bold","italic"],["ordered"]]},null,8,["modelValue"]),(0,i.Wm)(l,{flat:"",bordered:"",color:"white","text-color":"black",url:"https://admin.travelrover.in/travel-rover/api-files/",style:{},"auto-upload":"",label:"Add image if any","field-name":"file",onUploaded:s.day_img_update,"max-files":"1",onRejected:s.onRejected},null,8,["onUploaded","onRejected"])])}const A=e=>fetch(e).then((e=>e.blob())).then((e=>new Promise(((t,a)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=a,i.readAsDataURL(e)})))),Q={name:"day-editor",props:["day_index","day_content","day_images","day_obj"],setup(){return{details:""}},model:{prop:"day_content",event:"day_content_change"},methods:{day_img_update:function(e){var t=JSON.parse(e.xhr.response).file;t="https://admin.travelrover.in"+t;var a=this.day_index;A(t).then((e=>{console.log("RESULT:",e)}));var i={index_day:a,value:t};console.log(i),this.$store.commit("day_img_update",i),console.log(this.$store)},onRejected:function(e){$q.notify({type:"negative",message:`${e.length} file(s) did not pass validation constraints`})}},computed:{day_content_store:{get:function(){return this.$store.state.itinerary_preview.days[this.day_index].description},set:function(e){var t=this.day_index,a={index_day:t,value:e};this.$store.commit("day_content_update",a)}}}};var O=a(1639),C=a(9879),T=a(7534),N=a(9984),J=a.n(N);const R=(0,O.Z)(Q,[["render",U],["__scopeId","data-v-32456758"]]),j=R;J()(Q,"components",{QEditor:C.Z,QUploader:T.Z});var z=a(7007);const E={class:""},L={class:"q-ma-sm sectionheading"};function F(e,t,a,o,r,s){const n=(0,i.up)("q-editor"),l=(0,i.up)("q-uploader");return(0,i.wg)(),(0,i.iD)("div",E,[(0,i._)("div",L,(0,D.zw)(a.heading),1),(0,i.Wm)(n,{class:"",modelValue:s.property_content_store,"onUpdate:modelValue":t[0]||(t[0]=e=>s.property_content_store=e),"min-height":"5rem",toolbar:[["bold","italic"],["underline"],["ordered"]]},null,8,["modelValue"]),this.image?((0,i.wg)(),(0,i.j4)(l,{key:0,style:{},color:"white","text-color":"black",bordered:"",flat:"",url:"https://admin.travelrover.in/travel-rover/api-files/","auto-upload":"",label:"Add image if any","field-name":"file","max-files":"1",onUploaded:s.property_img_update},null,8,["onUploaded"])):(0,i.kq)("",!0)])}const B={name:"PicturedWYISG",props:["heading","property_key","image"],methods:{property_img_update:function(e){var t=JSON.parse(e.xhr.response).file;t="https://admin.travelrover.in"+t,console.log("here"),this.$store.commit(this.property_key+"_img_update",t),console.log(this.$store.state.itinerary_preview.places_to_visit_img)}},computed:{property_content_store:{get:function(){return this.$store.state.itinerary_preview[this.property_key]},set:function(e){var t=this.property_key+"_update";this.$store.commit(t,e),console.log(this.$store.state)}}},setup(){return{editor:""}}},G=(0,O.Z)(B,[["render",F],["__scopeId","data-v-ec25fb8e"]]),Y=G;J()(B,"components",{QEditor:C.Z,QUploader:T.Z});const H={class:""},K={class:"q-ma-sm sectionheading"};function M(e,t,a,o,r,s){const n=(0,i.up)("q-uploader");return(0,i.wg)(),(0,i.iD)("div",H,[(0,i._)("div",K,(0,D.zw)(a.heading),1),this.image?((0,i.wg)(),(0,i.j4)(n,{key:0,style:{},color:"white","text-color":"black",bordered:"",flat:"",url:"https://admin.travelrover.in/travel-rover/api-files/","auto-upload":"",label:"Add image if any","field-name":"file","max-files":"1",onUploaded:s.property_img_update},null,8,["onUploaded"])):(0,i.kq)("",!0)])}const X={name:"OnlyPicture",props:["heading","property_key","image"],methods:{property_img_update:function(e){var t=JSON.parse(e.xhr.response).file;t="https://admin.travelrover.in"+t,console.log("here"),this.$store.commit(this.property_key+"_img_update",t),console.log(this.$store.state.itinerary_preview.places_to_visit_img)}},computed:{property_content_store:{get:function(){return this.$store.state.itinerary_preview[this.property_key]},set:function(e){var t=this.property_key+"_update";this.$store.commit(t,e),console.log(this.$store.state)}}},setup(){return{editor:""}}},ee=(0,O.Z)(X,[["render",M],["__scopeId","data-v-0e1d97a8"]]),te=ee;J()(X,"components",{QUploader:T.Z});var ae=a(8275),ie=a(5473),oe=a(7449),re=(a(6827),a(6060));let se;const ne={name:"Itinary-Builder",components:{PicturedWYISG:Y,ItineraryPreview:z["default"],DayEditor:j,Datepicker:ae.Z,OnlyPicture:te},mounted(){window.location.href;var e=window.location.href.split("?pk=")[1];this.view_itinerary(e)},methods:{view_itinerary(e){var t={itinerary_pk:e};(0,oe.zy)().then((a=>{var i=window.localStorage.getItem("travel_rover_access");this.card=!0;console.log(e),-1!=e&&(0,oe.sJ)(t,i).then((e=>{console.log(JSON.parse(e["data"]["data"])[0]["fields"]),this.$store.commit("itinerary_preview_update",JSON.parse(e["data"]["data"])[0]["fields"]);var t=JSON.parse(e["data"]["data"])[0]["fields"]["start_dates"];t=JSON.parse(t),console.log(t),this.$store.commit("start_dates_update",t)})),this.$store.commit("user_logged_in_update",!0)})).catch((a=>{console.log(a),(0,oe.G_)().then((a=>{var i=a["data"]["access"];window.localStorage.setItem("travel_rover_access",i),-1!=e&&(0,oe.sJ)(t,i).then((e=>{console.log(JSON.parse(e["data"]["data"])[0]["fields"]),this.$store.commit("itinerary_preview_update",JSON.parse(e["data"]["data"])[0]["fields"]);var t=JSON.parse(e["data"]["data"])[0]["fields"]["start_dates"];t=JSON.parse(t),console.log(t),this.$store.commit("start_dates_update",t)})),this.$store.commit("user_logged_in_update",!0)})).catch((e=>{se.notify({type:"negative",message:"Kindly log-in/sign-up to enable this functionality",position:"top"}),this.$store.commit("user_logged_in_update",!1),console.log(e)}))}))},place_file_uploaded:function(e){var t=JSON.parse(e.xhr.response).file;t="https://admin.travelrover.in"+t,this.$store.commit("place_img_update",t)},days_add:function(){console.log("add days called"),this.$store.commit("day_add",1),console.log(this.$store.state.itinerary_preview.days)},generateReport(){async function e(e){const t=await A(e.state.itinerary_preview.place_img);e.commit("place_img_update",t)}async function t(e){for(let t=0;t<e.state.itinerary_preview.places_to_visit_img[0].images.length;t++)if(""!=e.state.itinerary_preview.places_to_visit_img[0].images[t]){const a=await A(e.state.itinerary_preview.places_to_visit_img[0].images[t]);e.commit("places_to_visit_"+(t+1)+"_img_update",a),console.log(e)}}async function a(e){for(let t=0;t<e.state.itinerary_preview.accomodation_arrangements_img[0].images.length;t++)if(""!=e.state.itinerary_preview.accomodation_arrangements_img[0].images[t]){const a=await A(e.state.itinerary_preview.accomodation_arrangements_img[0].images[t]);e.commit("accomodation_arrangements_"+(t+1)+"_img_update",a),console.log(e)}}async function i(e){alert("PDF will be downloaded within "+2*e.state.itinerary_preview.days.length+" seconds");for(let t=0;t<e.state.itinerary_preview.days.length;t++){const a=await A(e.state.itinerary_preview.days[t].images),i={index_day:t,value:a};e.commit("day_img_update",i),console.log(e),t==e.state.itinerary_preview.days.length-1&&setTimeout((()=>{(0,ie.Z)(document.getElementById("preview"),{pagebreak:{mode:"avoid-all",before:"#page2el"},filename:e.state.itinerary_preview.place_name})}),"1000")}}e(this.$store).then((e=>{console.log("done")})),a(this.$store).then((e=>{console.log("done")})),t(this.$store).then((e=>{console.log("done")})),i(this.$store).then((e=>{console.log("done")}))},save_itinerary:function(){console.log(this.$store.state.itinerary_preview),(0,oe.zy)().then((e=>{var t=window.localStorage.getItem("travel_rover_access");(0,oe.Ig)({itinerary:this.$store.state.itinerary_preview,itinerary_pk:window.location.href.split("?pk=")[1]},t),this.$store.commit("user_logged_in_update",!0)})).catch((e=>{console.log(e),(0,oe.G_)().then((e=>{var t=e["data"]["access"];window.localStorage.setItem("travel_rover_access",t),(0,oe.Ig)({itinerary:this.$store.state.itinerary_preview,itinerary_pk:window.location.href.split("?pk=")[1]},t),this.$store.commit("user_logged_in_update",!0)})).catch((e=>{se.notify({type:"negative",message:"Kindly log-in/sign-up to enable this functionality",position:"top"}),this.$store.commit("user_logged_in_update",!1),console.log(e)}))}))},go_to_create_itinerary(){this.$router.push({path:"/itinerarybuilder",name:"ItineraryBuilder",query:{pk:-1}})},addScript(e){var t=document.createElement("script");t.type="application/javascript",t.src=e,document.head.appendChild(t)},onSelectFile(){const e=this.$refs.fileInput,t=e.files;if(this.FileImage=t[0],t&&t[0]){const e=new FileReader;e.onload=e=>{this.imageData=e.target.result},e.readAsDataURL(t[0]),this.$emit("input",t[0])}console.log(this.imageData)},choosepicture(){this.$refs.fileInput.click()}},data(){return{imageData:null,date:[]}},computed:{place_name:{set(e){this.$store.commit("place_name_update",e)},get(){return this.$store.state.itinerary_preview.place_name}},place_description:{set(e){this.$store.commit("place_description_update",e)},get(){return this.$store.state.itinerary_preview.place_description}},tour_highlights:{set(e){this.$store.commit("tour_highlights_update",e)},get(){return this.$store.state.itinerary_preview.tour_highlights}},place_img:{set(e){this.$store.commit("place_img_update",e)},get(){return this.$store.state.itinerary_preview.place_img}},itinerary_name:{set(e){this.$store.commit("itinerary_name_update",e)},get(){return this.$store.state.itinerary_preview.itinerary_name}},start_dates:{set(e){var t=[];e.map((e=>{t.push(e.toISOString().slice(0,10))})),this.$store.commit("start_dates_update",t),console.log(this.$store.state.itinerary_preview.start_dates)},get(){return this.$store.state.itinerary_preview.start_dates}},number_of_days:{set(e){this.$store.commit("number_of_days_update",e)},get(){return this.$store.state.itinerary_preview.number_of_days}},itinerary_update:{set(e){this.$store.commit("itinerary_update",e)},get(){return this.$store.state.itinerary_preview}},days:{set(e){this.$store.commit("day_update",e)},get(){return this.$store.state.itinerary_preview.days}}},created(){console.log(this.days),this.matAccountCircle=re.Az6}};var le=a(1663),de=a(8879),ce=a(1973),pe=a(6362),_e=a(3246),me=a(490),ge=a(1233),ue=a(6663),ye=a(7887),he=a(6611),ve=a(2857),we=a(2765),fe=a(7088),ke=a(2146);const $e=(0,O.Z)(ne,[["render",Z],["__scopeId","data-v-3ab0326f"]]),be=$e;J()(ne,"components",{QToolbar:le.Z,QBtn:de.Z,QToolbarTitle:ce.Z,QMenu:pe.Z,QList:_e.Z,QItem:me.Z,QItemSection:ge.Z,QScrollArea:ue.Z,QSelect:ye.Z,QInput:he.Z,QUploader:T.Z,QIcon:ve.Z,QPopupProxy:we.Z,QDate:fe.Z}),J()(ne,"directives",{ClosePopup:ke.Z})}}]);